---
title: "Authentication with rtweet"
output:
  rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Authentication with rtweet}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, eval = FALSE, comment = "#>", collapse = TRUE)
```

rtweet's default authentication mechanism allows you to act on behalf of your personal Twitter account, as if you were performing actions on twitter.com.
This vignette shows you how to use two other authentication mechanisms useful for other scenarios:

-   App authentication allows you to act as if you were a Twitter app.
    You can't perform operations that a user would (like posting a tweet or reading a DM), but in return you get higher rate limits on operations like searching for tweets.

-   Bot authentication allows you to create a fully automated Twitter bot that performs actions on its own behalf rather than on behalf of a human.

In either case, you'll need to start by creating a Twitter app, so this vignette will first walk you through that process.
You'll then learn how to create and save the objects needed to use these two new types of authentication.

## Creating a Twitter app

To create a Twitter app, you need to first apply for a developer account by following the instructions at <https://developer.twitter.com>.
Once you have acquired a developer account, navigate to the [developer portal](https://developer.twitter.com/en/portal/projects-and-apps) and click the "Create App" button at the bottom of the page.
You'll need to name your app: the name is unimportant for our purposes, but needs to be unique across all twitter apps.

Once you've created your app, click on "Keys and tokens" to get a screen like this:

![](keys-tokens.png){width="362"}

You'll need some data from this screen in the next step.

## Setup

Now you're ready to tell rtweet how to authenticate using your app.
You have two options:

-   `rtweet_user()` is best for collecting data.
-   `rtweet_bot()` is best for creating twitter bots.

In either case, you first create an auth object using some data from the token and keys page:

-   For `auth_as_user()` click the "regenerate" next to the "bearer token".
    Then copy and paste the bearer token into a call to `auth_as_user()` giving you something like this:

    ```{r}
    auth <- rtweet_user("AAAAAAAAAAAAAAAAAAAAAIHUNwEAAAAAx5ZEqp%2B3%2BnVlSv8g8c1%2BdSAp5KI%3Dpq13bmse5BcjoJPjoYBH0EfknTyrYiY5H46K8JQ7INzBer4xqv")
    ```

-   For `auth_as_bot()` you'll need to click regenerate next to "API key & secret" to get the first two arguments, and (re)generate next to "Access token & secret" to get the second two arguments.
    The result should look something like:

    ```{r}
    auth <- rtweet_bot(
      "naVFHnZDlqY2PJSY1SbEdTaFm",
      "YdP8ugrga48Bg8eDXps1uW00Eb4HiSEvzcSKNBj9Zg1QQWycPx",
      "1365671359137873920-YHcLK2BaLfTWUOo7I5rSRdXDqRvSNd",
      "78gVMohl5v7vNQsy4szaJ8HnujSnDYXBVqXiYprcKWd4b"
    )
    ```

Note that all of these elements are equivalent to a username and password, so you shouldn't put them in R scripts.
If you do accidentally publish them, go back to the "Keys and tokens" page and re-generate the parameters.

Next, check that your auth works by running:

```{r}
auth_whoami(auth)
```

Assuming that's good, you can now run `auth_save()` to save your authentication object so that you can use it again in the future:

```{r}
auth_save(auth, "your-app-name")
```

## Use

Now, in a future session, you can use your saved auth by calling `auth_as()`:

```{r}
auth_as("your-app-name")
```
